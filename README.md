# PlamoScanner (プラモ余剰パーツ管理アプリ)

NFCタグ（RFID）とQRコードの両方を活用して、プラモデルの余剰パーツと収納箱を紐付けて管理するAndroidアプリです。

<img src="画面イメージ.png" width="300" alt="画面イメージ">  <img src="Notion画面.png" width="300" alt="Notion画面">


## 主な機能

### 1. ハイブリッド・スキャン
NFC（背面タッチ）とQRコード（カメラ）の双方を同時に待ち受けます。どちらか先に反応した方のIDを使用して処理を進めます。
QRPrintを使うとQRコードをPDFとして生成できます。（サンプル：qr_labels_sheet_20260211_125034.pdf (A4用紙 4枚ラベル用)）
それをラベルシールに印刷することですぐに活用できます。

### 2. 箱にしまう (メインフロー)
箱のIDと袋のIDを順番にスキャンすることで、Notion上の袋レコードに「どの箱に入っているか」を記録します。
- **ステップ1**: 箱をスキャン。未登録なら自動作成。
- **ステップ2**: 袋をスキャン。未登録なら自動作成。
- **完了**: 袋レコードのリレーションを更新し、Notionアプリで箱のページを開きます。

### 3. 袋/箱スキャン
それぞれのIDをスキャンし、情報の確認または新規登録を行います。完了後は自動でNotionアプリが開き、詳細（パーツ名、写真など）を編集できます。

## 技術仕様
- **言語**: Kotlin
- **UI**: Jetpack Compose (Material3)
- **カメラ/QR**: CameraX + Google ML Kit (Barcode Scanning)
- **NFC**: NfcAdapter (Reader Mode)
- **バックエンド**: Notion API (Retrofit2)

## Notionデータベース構成
本アプリを利用するには、以下の構成のNotionデータベースが必要です。
アプリとして必要な最低限の項目は下記の通りです。これに加えて写真やメモなどはお好みで追加してください。
メインフローである「箱にしまう」を実行すると、新規QRの場合以下の2つのレコードが作成され、箱マスターのレコードがNotionで表示されます。袋マスターの**現在の箱**リンクを双方向にしておくことで、箱に入っている袋のリストが箱マスターのページに表示可能です。これらの表示設定や表示項目の追加はNotion側で自由に行ってください。

### 袋マスター (HUKURO)
- **袋ID** (Title): UIDまたはQRの文字列 (PK)
- **商品名** (Rich Text): パーツの名称
- **現在の箱** (Relation): HAKOテーブルへのリンク

### 箱マスター (HAKO)
- **箱ID** (Title): UIDまたはQRの文字列 (PK)
- **箱名** (Rich Text): 収納場所の名称

## セットアップ
1. `SecretConfig.kt` にNotionのAPIキー(インテグレーションシークレット)とデータベースID(NotionデータベースのURLに含まれる32桁の英数字)を設定。
2. Notionのインテグレーションに、対象のデータベースへのアクセス権を付与。
3. Android実機でカメラ権限とNFCを有効にして実行。
